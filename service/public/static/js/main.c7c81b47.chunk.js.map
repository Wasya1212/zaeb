{"version":3,"sources":["serviceWorker.js","constants/action-types.js","reducers/index.js","store/index.js","actions/index.js","components/Users.jsx","components/Auth.jsx","components/Header.jsx","components/LoginForm.jsx","pages/SignIn.jsx","components/RegistrationForm.jsx","pages/SignUp.jsx","pages/Profile.jsx","components/Chat.jsx","pages/Chat.jsx","pages/Message.jsx","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","ADD_ARTICLE","ADD_TOKEN","ADD_AUTHENTICATION","REMOVE_AUTHENTICATION","initialState","articles","token","localStorage","getItem","isAuthenticated","rootReducer","arguments","length","undefined","action","type","Object","assign","concat","payload","store","createStore","addToken","addAuthentication","removeAuthentication","UsersList","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","showUserModal","user","setState","userModalIsOpen","closeUserModal","_this2","react_default","a","createElement","className","users","map","onClick","Users_UserProfile","lib_default","isOpen","onRequestClose","contentLabel","Users_UserView","react_router_dom","to","_id","toString","Component","SearchUsersButton","_this3","findUsers","name","axios","post","_ref","data","err","handleUsersChange","e","target","value","hideUsersList","setTimeout","checked","showUsersList","onFocus","onBlur","placeholder","onChange","Users_UsersList","hidden","UserProfile","src","info","photo","email","UserView","_ref2","salary","status","work_times","start","end","work_days","indexOf","UserSettingsButton","_this4","onFileChange","selectedFile","files","onWorkDaysChange","workDays","filter","workDay","onSalaryChange","onPostChange","onPhoneChange","phone","onStartWorkTimeChange","startWorkTime","onEndWorkTimeChange","endWorkTime","onSubmit","preventDefault","validateForm","alert","FormData","append","JSON","stringify","avatarImage","headers","content-type","_ref3","updatedUser","onUpdating","valid","test","id","mapDispatchToProps","dispatch","LogoutComponent","logout","removeItem","reload","children","AuthComponent","redirect","successRedirect","react_router","failureRedirect","Auth","connect","LogoutBtn","Modal","setAppElement","Navigation","Logo","alt","Header","Header_Logo","Users_SearchUsersButton","Header_Navigation","LoginForm","handleChange","defineProperty","handleSubmit","password","setItem","success","clear","required","Login","SignIn","successLogin","components_LoginForm","RegistrationForm","username","reEmail","rePassword","Registration","SignUp","successregistration","components_RegistrationForm","Profile","handleUserUpdate","Users_UserSettingsButton","ChatView","chat","messages","timestamp","date","slice","time","getTime","updatedAt","ChatList","Array","isArray","chats","key","Chat_ChatView","CreateChatComponent","private","chatName","afterCreate","AddUserToChatBtn","showAddUsersToChatModal","addUserToChatModalIsOpen","hideAddUsersToChatModal","requestProcessing","addUser","userId","chatId","resolve","Chat","showCreateChatForm","createChatModalIsOpen","closeCreateChatForm","afterChatCreate","Chat_CreateChatComponent","Chat_ChatList","Message","getConversationMessages","interlocutorId","getDiscussionMessages","_ref4","sendMessage","message","sendingMessage","_ref5","socket","emit","room","params","textInput","current","handleMessageChange","React","createRef","_this$props$match$par","direction","get","socketIOClient","on","_ref6","prevProps","prevState","_this$props$match$par2","Chat_AddUserToChatBtn","author","text","ref","addArticle","ReactDOM","render","es","components_Header","path","component","SignInPage","SignUpPage","ProfilePage","exact","ChatPage","MessagePage","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.c7c81b47.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export const ADD_ARTICLE = \"ADD_ARTICLE\";\r\nexport const ADD_TOKEN = \"ADD_TOKEN\";\r\nexport const ADD_AUTHENTICATION = \"ADD_AUTHENTICATION\";\r\nexport const REMOVE_AUTHENTICATION = \"REMOVE_AUTHENTICATION\";\r\n","import {\r\n  ADD_ARTICLE,\r\n  ADD_TOKEN,\r\n  ADD_AUTHENTICATION,\r\n  REMOVE_AUTHENTICATION\r\n} from \"../constants/action-types\";\r\n\r\nconst initialState = {\r\n  articles: [],\r\n  token: localStorage.getItem('token') || '',\r\n  isAuthenticated: false\r\n};\r\n\r\nfunction rootReducer(state = initialState, action) {\r\n  if (action.type === ADD_ARTICLE) {\r\n    return Object.assign({}, state, {\r\n      articles: state.articles.concat(action.payload)\r\n    });\r\n  }\r\n\r\n  if (action.type === ADD_TOKEN) {\r\n    return Object.assign({}, state, {\r\n      token: action.payload\r\n    });\r\n  }\r\n\r\n  if (action.type === ADD_AUTHENTICATION) {\r\n    console.log('add auth')\r\n    return Object.assign({}, state, {\r\n      isAuthenticated: true\r\n    });\r\n  }\r\n\r\n  if (action.type === REMOVE_AUTHENTICATION) {\r\n    console.log('remove auth')\r\n    return Object.assign({}, state, {\r\n      isAuthenticated: false\r\n    });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nexport default rootReducer;\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"../reducers/index\";\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;\r\n","import {\r\n  ADD_ARTICLE,\r\n  ADD_TOKEN,\r\n  ADD_AUTHENTICATION,\r\n  REMOVE_AUTHENTICATION\r\n} from \"../constants/action-types\";\r\n\r\nexport function addArticle(payload) {\r\n  return { type: ADD_ARTICLE, payload };\r\n}\r\n\r\nexport function addToken(payload) {\r\n  return { type: ADD_TOKEN, payload };\r\n}\r\n\r\nexport function addAuthentication() {\r\n  return { type: ADD_AUTHENTICATION };\r\n}\r\n\r\nexport function removeAuthentication() {\r\n  return { type: REMOVE_AUTHENTICATION };\r\n}\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport \"../styles/user.sass\";\r\n\r\nclass UsersList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      userModalIsOpen: false,\r\n      user: {}\r\n    };\r\n  }\r\n\r\n  showUserModal = user => {\r\n    this.setState({\r\n      userModalIsOpen: true,\r\n      user\r\n    });\r\n  }\r\n\r\n  closeUserModal = () => {\r\n    this.setState({\r\n      userModalIsOpen: false,\r\n      user: {}\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ul {...this.props} className=\"users-search-list\">\r\n          {this.props.users.map(user => (<li className=\"users-search-list__item\" onClick={() => { this.showUserModal(user); }}><UserProfile user={user}/></li>))}\r\n        </ul>\r\n        <Modal\r\n          isOpen={this.state.userModalIsOpen}\r\n          onRequestClose={this.closeUserModal}\r\n          contentLabel=\"Find users\"\r\n        >\r\n          {\r\n            this.state.userModalIsOpen ? (\r\n              <div>\r\n                <UserView user={this.state.user} />\r\n                <Link to={\"/chat/conversation/\" + this.state.user._id.toString()} onClick={this.closeUserModal}>Go to messaging</Link>\r\n              </div>\r\n            ) : null}\r\n          <button className=\"close-modal-btn\" onClick={this.closeUserModal}>Close modal</button>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass SearchUsersButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      users: [],\r\n      checked: false\r\n    };\r\n  }\r\n\r\n  findUsers = name => {\r\n    axios\r\n      .post('/api/users', { name: name, token: localStorage.getItem('token') })\r\n      .then(({ data: users }) => {\r\n        this.setState({ users });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  handleUsersChange = e => {\r\n    if (e.target.value === '') {\r\n      this.setState({\r\n        users: []\r\n      });\r\n    } else {\r\n      this.findUsers(e.target.value);\r\n    }\r\n  }\r\n\r\n  hideUsersList = e => {\r\n    setTimeout(() => {\r\n      this.setState({\r\n        checked: false\r\n      });\r\n    }, 200);\r\n  }\r\n\r\n  showUsersList = e => {\r\n    this.setState({\r\n      checked: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"users-search-form\">\r\n        <input\r\n          onFocus={this.showUsersList}\r\n          onBlur={this.hideUsersList}\r\n          placeholder=\"Users search...\"\r\n          onChange={this.handleUsersChange}\r\n        />\r\n        <UsersList hidden={!this.state.checked} users={this.state.users} />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst UserProfile = props => (\r\n  <div {...props} className=\"user-profile\">\r\n    <div className=\"user-profile__picture\">\r\n      <img src={props.user.info.photo || \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTc5zNZV5Uc6ZwS4JAxBVS0DiqUtIAR_Q5u6-G42vMfNk3mFFLj\"} />\r\n    </div>\r\n    <div className=\"user-profile__info\">\r\n      <div className=\"user-profile__name\">{props.user.info.name}</div>\r\n      <div className=\"user-profile__email\">{props.user.email}</div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst UserView = ({user}) => (\r\n  <div className=\"user-info\">\r\n    <div className=\"user-info__picture\">\r\n      <img src={user.info.photo || \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTc5zNZV5Uc6ZwS4JAxBVS0DiqUtIAR_Q5u6-G42vMfNk3mFFLj\"} />\r\n    </div>\r\n    <ul className=\"user-info__list\">\r\n      <li className=\"user-info__name\">name: {user.info.name || ''}</li>\r\n      <li className=\"user-info__email\">email: {user.email || ''}</li>\r\n      <li className=\"user-info__post\">post: {user.info.post || ''}</li>\r\n      <li className=\"user-info__salary\">salary: {user.info.salary || ''} UAH</li>\r\n      <li className=\"user-info__work-time\">workin time:{(user.info.status.work_times.start || '') + ' - ' + (user.info.status.work_times.end || '')}</li>\r\n      <li className=\"user-info__work-days\">\r\n        <div className={user.info.status.work_days.indexOf(1) == -1 ? \"day\" : \"day active-day\"}>Mn</div>\r\n        <div className={user.info.status.work_days.indexOf(2) == -1 ? \"day\" : \"day active-day\"}>Ts</div>\r\n        <div className={user.info.status.work_days.indexOf(3) == -1 ? \"day\" : \"day active-day\"}>Wd</div>\r\n        <div className={user.info.status.work_days.indexOf(4) == -1 ? \"day\" : \"day active-day\"}>Th</div>\r\n        <div className={user.info.status.work_days.indexOf(5) == -1 ? \"day\" : \"day active-day\"}>Fd</div>\r\n        <div className={user.info.status.work_days.indexOf(6) == -1 ? \"day\" : \"day active-day\"}>St</div>\r\n        <div className={user.info.status.work_days.indexOf(7) == -1 ? \"day\" : \"day active-day\"}>Sn</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n);\r\n\r\nclass UserSettingsButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    try {\r\n      this.state = {\r\n        userModalIsOpen: false,\r\n        selectedFile: null,\r\n        workDays: this.props.user.info.status.work_days || [],\r\n        salary: this.props.user.info.salary || 0,\r\n        post: this.props.user.info.post || '',\r\n        startWorkTime: this.props.user.info.status.work_times.start || '',\r\n        endWorkTime: this.props.user.info.status.work_times.end || '',\r\n        phone: this.props.user.info.phone || '',\r\n        avatarImage: this.props.user.info.photo || '',\r\n        updatedUser: {}\r\n      };\r\n    } catch (e) {\r\n      console.log(e)\r\n      this.state = {\r\n        userModalIsOpen: false,\r\n        selectedFile: null,\r\n        workDays: [],\r\n        salary: 0,\r\n        post: '',\r\n        startWorkTime: '',\r\n        endWorkTime: '',\r\n        phone: '',\r\n        avatarImage: '',\r\n        updatedUser: {}\r\n      };\r\n    }\r\n  }\r\n\r\n  showUserModal = user => {\r\n    this.setState({\r\n      userModalIsOpen: true\r\n    });\r\n  }\r\n\r\n  closeUserModal = () => {\r\n    this.setState({\r\n      userModalIsOpen: false\r\n    });\r\n  }\r\n\r\n  onFileChange = e => {\r\n    this.setState({\r\n      selectedFile: e.target.files[0]\r\n    })\r\n  }\r\n\r\n  onWorkDaysChange = e => {\r\n    if (e.target.checked) {\r\n      this.setState({\r\n        workDays: this.state.workDays.concat(e.target.value)\r\n      });\r\n    } else {\r\n      this.setState({\r\n        workDays: this.state.workDays.filter(workDay => workDay != e.target.value)\r\n      });\r\n    }\r\n  }\r\n\r\n  onSalaryChange = e => {\r\n    this.setState({\r\n      salary: e.target.value\r\n    });\r\n  }\r\n\r\n  onPostChange = e => {\r\n    this.setState({\r\n      post: e.target.value\r\n    });\r\n  }\r\n\r\n  onPhoneChange = e => {\r\n    this.setState({\r\n      phone: e.target.value\r\n    });\r\n  }\r\n\r\n  onStartWorkTimeChange = e => {\r\n    this.setState({\r\n      startWorkTime: e.target.value\r\n    });\r\n  }\r\n\r\n  onEndWorkTimeChange = e => {\r\n    this.setState({\r\n      endWorkTime: e.target.value\r\n    });\r\n  }\r\n\r\n  validateForm() {\r\n    let valid = true;\r\n\r\n    if (/^((\\+|38|0)+([0-9]){9})$/m.test(this.state.phone) == false && this.state.phone != '') {\r\n      valid = false\r\n    }\r\n\r\n    return valid;\r\n  }\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (!this.validateForm()) {\r\n      alert(\"Wrong data!\");\r\n      return false;\r\n    }\r\n\r\n    const data = new FormData();\r\n    data.append('token', localStorage.getItem('token'));\r\n    data.append('file', this.state.selectedFile);\r\n    data.append('workDays', JSON.stringify(this.state.workDays));\r\n    data.append('salary', this.state.salary);\r\n    data.append('post', this.state.post);\r\n    data.append('startWorkTime', this.state.startWorkTime);\r\n    data.append('endWorkTime', this.state.endWorkTime);\r\n    data.append('phone', this.state.phone);\r\n    data.append('avatarImage', this.state.avatarImage);\r\n\r\n    axios.post(\"/api/user/edit\", data, { headers: { 'content-type': 'multipart/form-data' }})\r\n      .then(({data: user}) => {\r\n        this.setState({updatedUser: user});\r\n      })\r\n      .then(() => {\r\n        this.props.onUpdating(this.state.updatedUser);\r\n      })\r\n      .then(() => {\r\n        this.closeUserModal();\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <button className=\"user-settings-btn\" onClick={this.showUserModal}>Settings</button>\r\n        <Modal\r\n          isOpen={this.state.userModalIsOpen}\r\n          onRequestClose={this.closeUserModal}\r\n          contentLabel=\"Find users\"\r\n        >\r\n          <form className=\"user-settings-form\" onSubmit={this.onSubmit}>\r\n            <p><label>Photo</label><input onChange={this.onFileChange} name=\"photo\" type=\"file\" placeholder=\"choose photo\" /></p>\r\n            <p><label>salary</label><input onChange={this.onSalaryChange} placeholder={`${this.props.user.info.salary} UAH`} name=\"salary\" type=\"number\" /></p>\r\n            <p><label>Post</label><input onChange={this.onPostChange} placeholder={`${this.props.user.info.post || \"enter your post\"}`} name=\"post\" type=\"text\" /></p>\r\n            <p><label>Phone</label><input onChange={this.onPhoneChange} placeholder={`${this.props.user.info.phone || \"+380123456789\"}`} name=\"phone\" type=\"tel\" /></p>\r\n            <p>\r\n              <label>Work Days</label>\r\n              <div className=\"wd\"><label>Monday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(1) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"1\" type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"1\" type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n              <div className=\"wd\"><label>Tuesday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(2) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"2\" type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"2\" type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n              <div className=\"wd\"><label>Wednesday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(3) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"3\" type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"3\" type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n              <div className=\"wd\"><label>Thursday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(4) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"4\"  type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"4\"  type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n              <div className=\"wd\"><label>Friday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(5) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"5\" type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"5\" type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n              <div className=\"wd\"><label>Saturday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(6) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"6\" type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"6\" type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n              <div className=\"wd\"><label>Sunday</label>{this.props.user.info.workDays && this.props.user.info.workDays.indexOf(7) != -1 ? <input checked onChange={this.onWorkDaysChange} value=\"7\" type=\"checkbox\" name=\"workDay\" id=\"\" /> : <input onChange={this.onWorkDaysChange} value=\"7\" type=\"checkbox\" name=\"workDay\" id=\"\" />}</div>\r\n            </p>\r\n            <p>\r\n              <label>Work times</label>\r\n              <input onChange={this.onStartWorkTimeChange} name=\"workStart\" type=\"time\" />\r\n              <input onChange={this.onEndWorkTimeChange} name=\"workEnd\" type=\"time\" />\r\n            </p>\r\n            <input type=\"submit\" value=\"Confirm\" />\r\n          </form>\r\n\r\n          <button className=\"close-modal-btn\" onClick={this.closeUserModal}>Close modal</button>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport { UserView, SearchUsersButton, UsersList, UserProfile, UserSettingsButton };\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { addAuthentication, removeAuthentication } from \"../actions/index\";\r\n\r\nimport axios from 'axios';\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    addAuthentication: () => dispatch(addAuthentication()),\r\n    removeAuthentication: () => dispatch(removeAuthentication())\r\n  };\r\n}\r\n\r\nclass LogoutComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  logout = () => {\r\n    axios\r\n      .post('/api/auth/logout', { token: localStorage.getItem('token') })\r\n      .then(() => {\r\n        this.props.removeAuthentication();\r\n        localStorage.removeItem('token');\r\n        window.location.reload();\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <span {...this.props} onClick={this.logout}>{this.props.children || 'logout'}</span>\r\n    )\r\n  }\r\n}\r\n\r\nclass AuthComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      redirect: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token') || '';\r\n\r\n    if (!token || token === '') {\r\n      console.error('No auth data is found!');\r\n\r\n      if (this.props.failureRedirect) {\r\n        this.setState({\r\n          redirect: <Redirect to={this.props.failureRedirect} />\r\n        });\r\n      }\r\n    } else {\r\n      axios\r\n        .post('/api/auth/authorization', {token})\r\n        .then(() => {\r\n          if (this.props.successRedirect) {\r\n            this.setState({\r\n              redirect: <Redirect to={this.props.successRedirect} />\r\n            });\r\n          }\r\n\r\n          this.props.addAuthentication();\r\n        })\r\n        .catch(err => {\r\n          if (this.props.failureRedirect) {\r\n            this.setState({\r\n              redirect: <Redirect to={this.props.failureRedirect} />\r\n            });\r\n          }\r\n\r\n          this.props.removeAuthentication();\r\n\r\n          console.error('Failure authentication!');\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Auth\">{this.state.redirect}</div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Auth = connect(null, mapDispatchToProps)(AuthComponent);\r\nconst LogoutBtn = connect(null, mapDispatchToProps)(LogoutComponent);\r\n\r\nexport {Auth, LogoutBtn};\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { removeAuthentication } from \"../actions/index\";\r\n\r\nimport { SearchUsersButton } from \"./Users.jsx\";\r\nimport { LogoutBtn } from \"./Auth.jsx\";\r\n\r\nimport \"../styles/header.sass\";\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst mapStateToProps = state => {\r\n  return { isAuthenticated: state.isAuthenticated };\r\n};\r\n\r\nconst Navigation = ({isAuthenticated}) => (\r\n  <div>\r\n    {\r\n      isAuthenticated == false ? (\r\n        <nav className=\"navigation\">\r\n          <li className=\"navigation__item\"><Link to=\"/sign-in\">login</Link></li>\r\n          <li className=\"navigation__item\"><Link to=\"/sign-up\">sign up</Link></li>\r\n        </nav>\r\n      ) : (\r\n        <nav className=\"navigation\">\r\n          <li className=\"navigation__item\"><Link to=\"/profile\">home</Link></li>\r\n          <li className=\"navigation__item\"><Link to=\"/chat\">chat</Link></li>\r\n          <li className=\"navigation__item\"><LogoutBtn /></li>\r\n        </nav>\r\n      )\r\n    }\r\n  </div>\r\n);\r\n\r\nconst Logo = () => (\r\n  <Link className=\"logo\" to=\"/profile\"><img src=\"https://www.okko.ua/adaptive/img/header/big-logo.svg\" alt=\"logo\" /></Link>\r\n);\r\n\r\nconst HeaderComponent = ({isAuthenticated}) => (\r\n  <header className=\"header\">\r\n    <Logo />\r\n    {isAuthenticated ? <SearchUsersButton /> : null}\r\n    <Navigation isAuthenticated={isAuthenticated}/>\r\n  </header>\r\n);\r\n\r\nconst Header = connect(mapStateToProps)(HeaderComponent);\r\n\r\nexport default Header;\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport axios from 'axios';\r\n\r\nimport { addToken, addAuthentication, removeAuthentication } from \"../actions/index\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    addToken: token => dispatch(addToken(token)),\r\n    addAuthentication: () => dispatch(addAuthentication()),\r\n    removeAuthentication: () => dispatch(removeAuthentication())\r\n  };\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { token: state.token };\r\n};\r\n\r\nclass LoginForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      email: '',\r\n      password: ''\r\n    };\r\n  }\r\n\r\n  validateForm() {\r\n    return this.state.email.length > 5 && this.state.password.length > 8;\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.validateForm() === true) {\r\n      axios\r\n        .post('/api/auth/sign-in', {\r\n          email: this.state.email,\r\n          password: this.state.password\r\n        })\r\n        .then(({ data: token }) => {\r\n          localStorage.setItem('token', token);\r\n          this.props.addToken(token);\r\n          this.props.addAuthentication();\r\n        })\r\n        .then(() => {\r\n          try {\r\n            this.props.success();\r\n          } catch (err) {\r\n            console.error(err);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          localStorage.clear();\r\n          this.props.removeAuthentication();\r\n          console.error(err);\r\n        });\r\n    } else {\r\n      alert('incorrect data');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"login-form\" onSubmit={this.handleSubmit}>\r\n        <input\r\n          className=\"email\"\r\n          value={this.state.email}\r\n          type=\"email\"\r\n          onChange={this.handleChange}\r\n          name=\"email\"\r\n          placeholder=\"email\"\r\n          required\r\n        />\r\n        <input\r\n          className=\"password\"\r\n          value={this.state.password}\r\n          type=\"password\"\r\n          onChange={this.handleChange}\r\n          name=\"password\"\r\n          placeholder=\"password\"\r\n          required\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n        >login</button>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nconst Login = connect(mapStateToProps, mapDispatchToProps)(LoginForm);\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport LoginForm from '../components/LoginForm.jsx';\r\nimport { Auth } from '../components/Auth.jsx';\r\n\r\nimport \"../styles/auth.sass\";\r\n\r\nclass SignIn extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      redirect: false\r\n    }\r\n  }\r\n\r\n  successLogin = () => {\r\n    this.setState({\r\n      redirect: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"auth-form\">\r\n        <h2 className=\"title\">Login</h2>\r\n        {this.state.redirect ? <Redirect to=\"/profile\" /> : null}\r\n        <Auth successRedirect=\"/profile\" />\r\n        <LoginForm success={this.successLogin} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignIn;\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport axios from 'axios';\r\n\r\nimport { addToken, addAuthentication, removeAuthentication } from \"../actions/index\";\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    addToken: token => dispatch(addToken(token)),\r\n    addAuthentication: () => dispatch(addAuthentication()),\r\n    removeAuthentication: () => dispatch(removeAuthentication())\r\n  };\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { token: state.token };\r\n};\r\n\r\nclass RegistrationForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      username: '',\r\n      email: '',\r\n      reEmail: '',\r\n      password: '',\r\n      rePassword: ''\r\n    };\r\n  }\r\n\r\n  validateForm() {\r\n    return this.state.username.length > 5 && this.state.email !== '' && this.state.password !== '' && this.state.email === this.state.reEmail && this.state.password === this.state.rePassword;\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.validateForm() === true) {\r\n      axios\r\n        .post('/api/auth/sign-up', {\r\n          username: this.state.username,\r\n          email: this.state.email,\r\n          password: this.state.password\r\n        })\r\n        .then(({ data: token }) => {\r\n          localStorage.setItem('token', token);\r\n          this.props.addToken(token);\r\n          this.props.addAuthentication();\r\n        })\r\n        .then(() => {\r\n          try {\r\n            this.props.success();\r\n          } catch (err) {\r\n            console.error(err);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          localStorage.clear();\r\n          this.props.removeAuthentication();\r\n          console.error(err);\r\n        });\r\n    } else {\r\n      alert('incorrect data');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"registration-form\" onSubmit={this.handleSubmit}>\r\n        <input\r\n          name=\"username\"\r\n          type=\"text\"\r\n          placeholder=\"full name\"\r\n          onChange={this.handleChange}\r\n          required=\"required\"\r\n        />\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"email\"\r\n          onChange={this.handleChange}\r\n          required=\"required\"\r\n        />\r\n        <input\r\n          name=\"reEmail\"\r\n          type=\"email\"\r\n          placeholder=\"retype email\"\r\n          onChange={this.handleChange}\r\n          required=\"required\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"password\"\r\n          onChange={this.handleChange}\r\n          required=\"required\"\r\n        />\r\n        <input\r\n          name=\"rePassword\"\r\n          type=\"password\"\r\n          placeholder=\"retype password\"\r\n          onChange={this.handleChange}\r\n          required=\"required\"\r\n        />\r\n        <button type=\"submit\">sign up</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst Registration = connect(mapStateToProps, mapDispatchToProps)(RegistrationForm);\r\n\r\nexport default Registration;\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport RegistrationForm from '../components/RegistrationForm.jsx';\r\nimport { Auth } from '../components/Auth.jsx';\r\n\r\nimport \"../styles/auth.sass\";\r\n\r\nclass SignUp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      redirect: false\r\n    }\r\n  }\r\n\r\n  successregistration = () => {\r\n    this.setState({\r\n      redirect: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"auth-form\">\r\n        <h2 className=\"title\">Registration</h2>\r\n        {this.state.redirect ? <Redirect to=\"/profile\" /> : null}\r\n        <Auth successRedirect=\"/profile\" />\r\n        <RegistrationForm success={this.successregistration} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUp;\r\n","import React, { Component } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { Auth } from '../components/Auth.jsx';\r\nimport { UserSettingsButton, UserView } from '../components/Users.jsx';\r\n\r\nclass Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      user: {\r\n        info: {\r\n          status: {\r\n            work_times: {},\r\n            work_days: []\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .post('/api/user/current-user', {token: localStorage.getItem('token')})\r\n      .then(({data: user}) => {\r\n        this.setState({user});\r\n        console.log()\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  handleUserUpdate = user => {\r\n    this.setState({user});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Auth failureRedirect=\"/sign-in\" />\r\n        <UserSettingsButton onUpdating={this.handleUserUpdate} user={this.state.user} />\r\n        <UserView user={this.state.user} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { UserProfile } from \"./Users.jsx\";\r\n\r\nimport \"../styles/chat.sass\";\r\n\r\nfunction getTime(timestamp) {\r\n  const date = timestamp.toString().slice(0,10);\r\n  let time = timestamp.toString().slice(11,16);\r\n\r\n  return `${date} ${time}`;\r\n}\r\n\r\nconst ChatView = ({chat}) => (\r\n  <div className=\"chat-view\">\r\n    <div className=\"chat-view__poster\">\r\n      <img src=\"https://ik.imagekit.io/PrintOctopus/s/files/1/0006/0158/7777/products/dab_life.png?v=1554963498\" />\r\n    </div>\r\n    <div className=\"chat-view__info\">\r\n      <div className=\"chat-view__title\">{chat.name}</div>\r\n      <div className=\"chat-view__users-count\">users: {chat.users.length - 1}</div>\r\n      <div className=\"chat-view__messages-count\">messages: {chat.messages.length}</div>\r\n      <div className=\"chat-view__latest-update\">{getTime(chat.updatedAt)}</div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst ChatList = props => {\r\n  if (!Array.isArray(props.chats)) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"chats\">\r\n      <ul className=\"chat-list\">\r\n        <h3>Users chats:</h3>\r\n        {\r\n          props.chats\r\n            .filter(chat => chat.name === 'conversation')\r\n            .map(chat => <li key={chat._id} className=\"chat-list__item\"><Link to={\"/chat/conversation/\" + chat.users[1].toString()}><ChatView chat={chat} /></Link></li>)\r\n        }\r\n      </ul>\r\n      <ul className=\"chat-list\">\r\n        <h3>Group chats:</h3>\r\n        {\r\n          props.chats\r\n            .filter(chat => chat.name !== 'conversation')\r\n            .map(chat => <li key={chat._id} className=\"chat-list__item\"><Link to={\"/chat/discussion/\" + chat._id.toString()}><ChatView chat={chat} /></Link></li>)\r\n        }\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nclass CreateChatComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      chatName: ''\r\n    };\r\n  }\r\n\r\n  validateForm() {\r\n    return this.state.chatName !== '';\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.validateForm() === true) {\r\n      axios\r\n        .post('/api/chat/create', { token: localStorage.getItem('token'), private: false, name: this.state.chatName })\r\n        .then(({ data: chat }) => {\r\n          if (this.props.afterCreate) {\r\n            this.props.afterCreate(chat);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          alert(\"Cannot create chat! Try again(\");\r\n        });\r\n    } else {\r\n      alert('incorrect data');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          onChange={this.handleChange}\r\n          name=\"chatName\"\r\n          placeholder=\"Chat name\"\r\n          required=\"required\"\r\n        />\r\n        <button type=\"submit\">create</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nclass AddUserToChatBtn extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      addUserToChatModalIsOpen: false,\r\n      users: []\r\n    };\r\n  }\r\n\r\n  showAddUsersToChatModal = () => {\r\n    this.setState({\r\n      addUserToChatModalIsOpen: true\r\n    });\r\n  }\r\n\r\n  hideAddUsersToChatModal = () => {\r\n    this.setState({\r\n      addUserToChatModalIsOpen: false,\r\n      requestProcessing: false\r\n    });\r\n  }\r\n\r\n  findUsers = name => {\r\n    this.setState({requestProcessing: true});\r\n\r\n    axios\r\n      .post('/api/users', { name, token: localStorage.getItem('token') })\r\n      .then(({ data: users }) => {\r\n        this.setState({ users, requestProcessing: false });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({requestProcessing: false});\r\n      });\r\n  }\r\n\r\n  handleUsersChange = e => {\r\n    if (e.target.value === '') {\r\n      this.setState({\r\n        users: []\r\n      });\r\n    } else {\r\n      this.findUsers(e.target.value);\r\n    }\r\n  }\r\n\r\n  addUser = userId => {\r\n    axios\r\n      .post('/api/chat/add-user', {token: localStorage.getItem('token'), userId, chatId: this.props.chatId})\r\n      .then(resolve => {\r\n        this.setState({\r\n          users: []\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"add-user-btn\">\r\n        <button onClick={this.showAddUsersToChatModal}>add user</button>\r\n        <Modal\r\n          isOpen={this.state.addUserToChatModalIsOpen}\r\n          onRequestClose={this.hideAddUsersToChatModal}\r\n          contentLabel=\"Add users\"\r\n        >\r\n          <h2>Add users to chat:</h2>\r\n          <input placeholder=\"Enter username...\" className=\"add-users-to-chat-input\" onChange={this.handleUsersChange} />\r\n          <ul className=\"add-users-to-chat-list\">\r\n            {\r\n              this.state.users.map(user => (\r\n                <li key={user._id}>\r\n                  <UserProfile user={user}/>\r\n                  {\r\n                    user.info.chats.indexOf(this.props.chatId) === -1 ? <button className=\"add-users-to-chat-btn\" onClick={() => {this.addUser(user._id)}}>add user</button> : null\r\n                  }\r\n                </li>\r\n              ))\r\n            }\r\n          </ul>\r\n          <button className=\"close-modal-btn\" onClick={this.hideAddUsersToChatModal}>Close modal</button>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport { CreateChatComponent, ChatList, AddUserToChatBtn };\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { Auth } from '../components/Auth.jsx';\r\nimport { ChatList, CreateChatComponent as CreateChat } from '../components/Chat.jsx';\r\n\r\nModal.setAppElement('#root');\r\n\r\nclass Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      createChatModalIsOpen: false,\r\n      chats: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .post('/api/chat/chat-rooms', { token: localStorage.getItem('token') })\r\n      .then(({ data: chats }) => {\r\n        this.setState({ chats });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      })\r\n  }\r\n\r\n  showCreateChatForm = () => {\r\n    this.setState({\r\n      createChatModalIsOpen: true\r\n    });\r\n  }\r\n\r\n  closeCreateChatForm = () => {\r\n    this.setState({\r\n      createChatModalIsOpen: false\r\n    });\r\n  }\r\n\r\n  afterChatCreate = chat => {\r\n    this.setState({\r\n      chats: this.state.chats.concat(chat)\r\n    });\r\n    this.closeCreateChatForm();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Auth failureRedirect=\"/sign-in\" />\r\n        <Modal\r\n          isOpen={this.state.createChatModalIsOpen}\r\n          onRequestClose={this.closeCreateChatForm}\r\n          contentLabel=\"Create chat\"\r\n        >\r\n          <CreateChat afterCreate={this.afterChatCreate} />\r\n          <button className=\"close-modal-btn\" onClick={this.closeCreateChatForm}>Close modal</button>\r\n        </Modal>\r\n        <button className=\"create-chat-btn\" onClick={this.showCreateChatForm}>Create chat</button>\r\n        <ChatList chats={this.state.chats} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Chat;\r\n","import React, { Component } from 'react';\r\n\r\nimport axios from \"axios\";\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nimport { MessageList, AddUserToChatBtn } from \"../components/Chat.jsx\";\r\n\r\nimport \"../styles/message.sass\";\r\n\r\nclass Message extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.textInput = React.createRef();\r\n\r\n    this.state = {\r\n      messages: [],\r\n      sendingMessage: '',\r\n      chatId: null,\r\n      interlocutorId: null,\r\n      socket: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {chatId, direction} = this.props.match.params;\r\n\r\n    axios\r\n      .get('/api/hostname')\r\n      .then(resolve => {\r\n        const socket = socketIOClient(resolve.data == 'localhost:3000' ? 'localhost:5000' : resolve.data);\r\n        this.setState({\r\n          socket: socket\r\n        })\r\n      })\r\n      .then(() => {\r\n        this.state.socket.emit('join to room', {chatId});\r\n        this.state.socket.on('message', ({message}) => {\r\n          this.setState({\r\n            messages: this.state.messages.concat(message)\r\n          });\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      })\r\n\r\n    switch (direction) {\r\n      case 'conversation':\r\n        this.getConversationMessages(chatId);\r\n        break;\r\n      case 'discussion':\r\n        this.getDiscussionMessages(chatId);\r\n        break;\r\n      default:\r\n        console.log('redirect to error page');\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n      if (prevProps.match.params != this.props.match.params) {\r\n          const {chatId, direction} = this.props.match.params;\r\n\r\n          switch (direction) {\r\n            case 'conversation':\r\n              this.getConversationMessages(chatId);\r\n              break;\r\n            case 'discussion':\r\n              this.getDiscussionMessages(chatId);\r\n              break;\r\n            default:\r\n              console.log('redirect to error page');\r\n          }\r\n      } else {\r\n        return false;\r\n      }\r\n  }\r\n\r\n  getConversationMessages = interlocutorId => {\r\n    axios\r\n      .post('/api/chat/conversation', {token: localStorage.getItem('token'), interlocutorId})\r\n      .then(({data: chat}) => {\r\n        this.setState({ chatId: chat._id, interlocutorId });\r\n        return chat._id;\r\n      })\r\n      .then(chatId => {\r\n        axios\r\n          .post('/api/chat/messages',  {token: localStorage.getItem('token'), chatId})\r\n          .then(({data: messages}) => {\r\n            this.setState({ messages });\r\n          });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  getDiscussionMessages = chatId => {\r\n    axios\r\n      .post('/api/chat/discussion', {token: localStorage.getItem('token'), chatId})\r\n      .then(({data: chat}) => {\r\n        this.setState({ chatId: chat._id });\r\n        return chat._id;\r\n      })\r\n      .then(chatId => {\r\n        axios\r\n          .post('/api/chat/messages',  {token: localStorage.getItem('token'), chatId})\r\n          .then(({data: messages}) => {\r\n            this.setState({ messages });\r\n          });\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  sendMessage = e => {\r\n    e.preventDefault();\r\n\r\n    axios\r\n      .post('/api/chat/message', {\r\n        token: localStorage.getItem('token'),\r\n        message: this.state.sendingMessage,\r\n        chatId: this.state.chatId,\r\n        interlocutorId: this.state.interlocutorId\r\n      })\r\n      .then(({data: message}) => {\r\n        try {\r\n          this.state.socket.emit('chat message', {room: this.props.match.params.chatId, message});\r\n        } catch (e) {} finally {\r\n          this.textInput.current.value = '';\r\n          this.setState({\r\n            messages: this.state.messages.concat(message),\r\n            sendingMessage: ''\r\n          });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  handleMessageChange = e => {\r\n    this.setState({\r\n      sendingMessage: e.target.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"messages-container\">\r\n        {\r\n          this.props.match.params.direction === 'discussion' ? <AddUserToChatBtn chatId={this.state.chatId}/> : null\r\n        }\r\n        <ul className=\"messages-list\">\r\n          {\r\n            this.state.messages.map(message => (\r\n              <li key={message._id}>\r\n                <div className=\"user-view\">\r\n                  <div className=\"user-view__picture\">\r\n                    <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTc5zNZV5Uc6ZwS4JAxBVS0DiqUtIAR_Q5u6-G42vMfNk3mFFLj\" />\r\n                  </div>\r\n                  <div className=\"user-view__info\">\r\n                    <span className=\"user-view__name\">{message.author.info.name}</span>\r\n                    <span className=\"user-view__email\">{message.author.email}</span>\r\n                  </div>\r\n                </div>\r\n                <p className=\"message\">{message.text}</p>\r\n              </li>\r\n            ))\r\n          }\r\n        </ul>\r\n        <form className=\"message-form\" onSubmit={this.sendMessage}>\r\n          <input ref={this.textInput} type=\"text\" required=\"required\" onChange={this.handleMessageChange} placeholder=\"Enter message...\" />\r\n          <button type=\"submit\">send</button>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Message;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport './index.css';\r\n// import App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\n\r\nimport store from \"./store/index\";\r\nimport { addArticle, addToken } from \"./actions/index\";\r\n\r\nimport Header from './components/Header.jsx';\r\n\r\nimport SignInPage from './pages/SignIn.jsx';\r\nimport SignUpPage from './pages/SignUp.jsx';\r\nimport ProfilePage from './pages/Profile.jsx';\r\nimport ChatPage from './pages/Chat.jsx';\r\nimport MessagePage from './pages/Message.jsx';\r\n\r\nimport { Auth } from './components/Auth.jsx';\r\n\r\nimport \"./styles/style.sass\";\r\n\r\nwindow.store = store;\r\nwindow.addArticle = addArticle;\r\nwindow.addToken = addToken;\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <Auth failureRedirect=\"/sign-in\"  />\r\n      <Header />\r\n\r\n      <Switch>\r\n        <Route path=\"/sign-in\" component={SignInPage} />\r\n        <Route path=\"/sign-up\" component={SignUpPage} />\r\n        <Route path=\"/profile\" component={ProfilePage} />\r\n        <Route exact path=\"/chat\" component={ChatPage} />\r\n        <Route path=\"/chat/:direction/:chatId\" component={MessagePage} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// ReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}